{
  "name": "Homestay Booking Notification",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "homestay-booking",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-homestay-booking",
      "name": "Webhook - Homestay Booking",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 300],
      "webhookId": "homestay-booking"
    },
    {
      "parameters": {
        "fromEmail": "booking@conphungtourist.com",
        "toEmail": "={{ $json.customer.email }}",
        "subject": "XÃ¡c nháº­n Ä‘áº·t phÃ²ng Homestay #{{ $json.reference }}",
        "emailType": "html",
        "message": "<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n    .header { background: #8b5cf6; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }\n    .content { padding: 20px; background: #f9fafb; }\n    .booking-details { background: white; padding: 20px; margin: 15px 0; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }\n    .detail-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e5e7eb; }\n    .detail-label { font-weight: 600; color: #6b7280; }\n    .detail-value { color: #111827; }\n    .footer { text-align: center; padding: 20px; color: #6b7280; font-size: 14px; }\n    .button { display: inline-block; padding: 12px 32px; background: #8b5cf6; color: white; text-decoration: none; border-radius: 6px; margin: 15px 0; font-weight: 600; }\n    .highlight { background: #fef3c7; padding: 15px; border-left: 4px solid #f59e0b; margin: 15px 0; border-radius: 4px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>ğŸ¡ Äáº·t PhÃ²ng Homestay ThÃ nh CÃ´ng!</h1>\n    </div>\n    <div class=\"content\">\n      <p>Xin chÃ o <strong>{{ $json.customer.fullName }}</strong>,</p>\n      <p>Cáº£m Æ¡n báº¡n Ä‘Ã£ chá»n Homestay táº¡i Khu Du Lá»‹ch Cá»“n Phá»¥ng. ChÃºng tÃ´i ráº¥t vui Ä‘Æ°á»£c Ä‘Ã³n tiáº¿p báº¡n!</p>\n      \n      <div class=\"booking-details\">\n        <h3 style=\"margin-top: 0; color: #8b5cf6;\">ğŸ“‹ ThÃ´ng Tin Äáº·t PhÃ²ng</h3>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">MÃ£ Ä‘áº·t phÃ²ng:</span>\n          <span class=\"detail-value\">{{ $json.reference }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">Homestay:</span>\n          <span class=\"detail-value\">{{ $json.homestay.title }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">NgÃ y nháº­n phÃ²ng:</span>\n          <span class=\"detail-value\">{{ $json.checkInDate }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">NgÃ y tráº£ phÃ²ng:</span>\n          <span class=\"detail-value\">{{ $json.checkOutDate }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">Sá»‘ Ä‘Ãªm:</span>\n          <span class=\"detail-value\">{{ $json.nights }} Ä‘Ãªm</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">Sá»‘ khÃ¡ch:</span>\n          <span class=\"detail-value\">{{ $json.guests }} ngÆ°á»i</span>\n        </div>\n        <div class=\"detail-row\" style=\"border-bottom: none; font-size: 18px; margin-top: 10px;\">\n          <span class=\"detail-label\">Tá»•ng tiá»n:</span>\n          <span class=\"detail-value\" style=\"color: #8b5cf6; font-weight: 700;\">{{ $json.totalAmount }} VND</span>\n        </div>\n      </div>\n      \n      <div class=\"highlight\">\n        <strong>â° Thá»i gian nháº­n/tráº£ phÃ²ng:</strong><br>\n        â€¢ Check-in: 14:00<br>\n        â€¢ Check-out: 12:00\n      </div>\n      \n      <p><strong>BÆ°á»›c tiáº¿p theo:</strong></p>\n      <ol style=\"padding-left: 20px;\">\n        <li>Äá»™i ngÅ© cá»§a chÃºng tÃ´i sáº½ liÃªn há»‡ xÃ¡c nháº­n trong vÃ²ng 24h</li>\n        <li>Vui lÃ²ng chuáº©n bá»‹ thanh toÃ¡n theo hÆ°á»›ng dáº«n</li>\n        <li>Mang theo CMND/CCCD khi check-in</li>\n      </ol>\n      \n      <div style=\"text-align: center;\">\n        <a href=\"{{ $json.bookingUrl }}\" class=\"button\">Xem Chi Tiáº¿t Äáº·t PhÃ²ng</a>\n      </div>\n      \n      <p style=\"margin-top: 20px;\">Náº¿u cÃ³ báº¥t ká»³ tháº¯c máº¯c nÃ o, vui lÃ²ng liÃªn há»‡:</p>\n      <p style=\"margin: 5px 0;\">ğŸ“ Hotline: 0123 456 789</p>\n      <p style=\"margin: 5px 0;\">ğŸ“§ Email: booking@conphungtourist.com</p>\n    </div>\n    <div class=\"footer\">\n      <p>Khu Du Lá»‹ch Cá»“n Phá»¥ng</p>\n      <p>Cáº£m Æ¡n báº¡n Ä‘Ã£ tin tÆ°á»Ÿng vÃ  lá»±a chá»n chÃºng tÃ´i! ğŸŒ´</p>\n    </div>\n  </div>\n</body>\n</html>"
      },
      "id": "email-customer",
      "name": "Email - Customer Confirmation",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [450, 200],
      "credentials": {
        "smtp": {
          "id": "1",
          "name": "SMTP account"
        }
      }
    },
    {
      "parameters": {
        "fromEmail": "system@conphungtourist.com",
        "toEmail": "admin@conphungtourist.com",
        "subject": "ğŸ¡ Äáº·t phÃ²ng Homestay má»›i #{{ $json.reference }}",
        "emailType": "html",
        "message": "<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n    .header { background: #0ea5e9; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }\n    .content { padding: 20px; background: #f9fafb; }\n    .booking-details { background: white; padding: 20px; margin: 15px 0; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }\n    .urgent { background: #fef3c7; padding: 15px; border-left: 4px solid #f59e0b; margin: 15px 0; border-radius: 4px; }\n    .button { display: inline-block; padding: 12px 32px; background: #0ea5e9; color: white; text-decoration: none; border-radius: 6px; margin: 15px 0; font-weight: 600; }\n    .detail-row { padding: 8px 0; border-bottom: 1px solid #e5e7eb; }\n    .detail-label { font-weight: 600; color: #6b7280; display: inline-block; width: 150px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>ğŸ¡ Äáº·t PhÃ²ng Homestay Má»›i!</h1>\n    </div>\n    <div class=\"content\">\n      <div class=\"urgent\">\n        <strong>âš ï¸ Cáº§n xá»­ lÃ½:</strong> Vui lÃ²ng liÃªn há»‡ khÃ¡ch hÃ ng trong vÃ²ng 24h Ä‘á»ƒ xÃ¡c nháº­n Ä‘áº·t phÃ²ng\n      </div>\n      \n      <div class=\"booking-details\">\n        <h3 style=\"margin-top: 0; color: #0ea5e9;\">ğŸ“‹ Chi Tiáº¿t Äáº·t PhÃ²ng</h3>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">MÃ£ booking:</span>\n          <span>{{ $json.reference }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">Homestay:</span>\n          <span>{{ $json.homestay.title }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">Check-in:</span>\n          <span>{{ $json.checkInDate }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">Check-out:</span>\n          <span>{{ $json.checkOutDate }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">Sá»‘ Ä‘Ãªm:</span>\n          <span>{{ $json.nights }} Ä‘Ãªm</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">Sá»‘ khÃ¡ch:</span>\n          <span>{{ $json.guests }} ngÆ°á»i</span>\n        </div>\n        <div class=\"detail-row\" style=\"border-bottom: none; font-size: 18px; margin-top: 10px;\">\n          <span class=\"detail-label\">Tá»•ng tiá»n:</span>\n          <span style=\"color: #0ea5e9; font-weight: 700;\">{{ $json.totalAmount }} VND</span>\n        </div>\n      </div>\n      \n      <div class=\"booking-details\">\n        <h3 style=\"margin-top: 0; color: #0ea5e9;\">ğŸ‘¤ ThÃ´ng Tin KhÃ¡ch HÃ ng</h3>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">TÃªn:</span>\n          <span>{{ $json.customer.fullName }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">Email:</span>\n          <span>{{ $json.customer.email }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"detail-label\">Äiá»‡n thoáº¡i:</span>\n          <span>{{ $json.customer.phone }}</span>\n        </div>\n        <div class=\"detail-row\" style=\"border-bottom: none;\">\n          <span class=\"detail-label\">Ghi chÃº:</span>\n          <span>{{ $json.specialRequests || 'KhÃ´ng cÃ³' }}</span>\n        </div>\n      </div>\n      \n      <div style=\"text-align: center;\">\n        <a href=\"{{ $json.bookingUrl }}\" class=\"button\">Xem & Xá»­ LÃ½ Booking</a>\n      </div>\n    </div>\n  </div>\n</body>\n</html>"
      },
      "id": "email-admin",
      "name": "Email - Admin Notification",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [450, 400],
      "credentials": {
        "smtp": {
          "id": "1",
          "name": "SMTP account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "YOUR_TELEGRAM_CHAT_ID",
        "text": "ğŸ¡ *Äáº·t PhÃ²ng Homestay Má»›i!*\n\nğŸ“‹ MÃ£: `{{ $json.reference }}`\nğŸ  Homestay: {{ $json.homestay.title }}\nğŸ‘¤ KhÃ¡ch: {{ $json.customer.fullName }}\nğŸ“ SÄT: {{ $json.customer.phone }}\nğŸ“§ Email: {{ $json.customer.email }}\n\nğŸ“… Check-in: {{ $json.checkInDate }}\nğŸ“… Check-out: {{ $json.checkOutDate }}\nğŸŒ™ Sá»‘ Ä‘Ãªm: {{ $json.nights }}\nğŸ‘¥ Sá»‘ khÃ¡ch: {{ $json.guests }}\nğŸ’° Tá»•ng: {{ $json.totalAmount }} VND\n\nğŸ“ Ghi chÃº: {{ $json.specialRequests || 'KhÃ´ng cÃ³' }}\n\nâš ï¸ *Cáº§n liÃªn há»‡ khÃ¡ch trong 24h!*\n\nğŸ”— [Xem chi tiáº¿t]({{ $json.bookingUrl }})",
        "additionalFields": {
          "parseMode": "Markdown"
        }
      },
      "id": "telegram-notification",
      "name": "Telegram - Admin Alert",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [450, 600],
      "credentials": {
        "telegramApi": {
          "id": "2",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { \"success\": true, \"message\": \"Homestay booking notification sent\", \"reference\": $json.reference } }}"
      },
      "id": "respond-webhook",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [650, 300]
    }
  ],
  "connections": {
    "Webhook - Homestay Booking": {
      "main": [
        [
          {
            "node": "Email - Customer Confirmation",
            "type": "main",
            "index": 0
          },
          {
            "node": "Email - Admin Notification",
            "type": "main",
            "index": 0
          },
          {
            "node": "Telegram - Admin Alert",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email - Customer Confirmation": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email - Admin Notification": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram - Admin Alert": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {},
  "staticData": null,
  "tags": ["booking", "homestay", "notification"],
  "triggerCount": 1,
  "updatedAt": "2025-01-22T00:00:00.000Z",
  "versionId": "1"
}
