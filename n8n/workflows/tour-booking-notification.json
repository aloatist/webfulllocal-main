{
  "name": "Tour Booking Notification",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "tour-booking",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-tour-booking",
      "name": "Webhook - Tour Booking",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 300],
      "webhookId": "tour-booking"
    },
    {
      "parameters": {
        "fromEmail": "booking@conphungtourist.com",
        "toEmail": "={{ $json.customerEmail }}",
        "subject": "X√°c nh·∫≠n ƒë·∫∑t tour #{{ $json.reference }}",
        "emailType": "html",
        "message": "<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n    .header { background: #22c55e; color: white; padding: 20px; text-align: center; }\n    .content { padding: 20px; background: #f9f9f9; }\n    .booking-details { background: white; padding: 15px; margin: 15px 0; border-radius: 8px; }\n    .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }\n    .button { display: inline-block; padding: 12px 24px; background: #22c55e; color: white; text-decoration: none; border-radius: 6px; margin: 10px 0; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>üéâ ƒê·∫∑t Tour Th√†nh C√¥ng!</h1>\n    </div>\n    <div class=\"content\">\n      <p>Xin ch√†o <strong>{{ $json.customerName }}</strong>,</p>\n      <p>C·∫£m ∆°n b·∫°n ƒë√£ ƒë·∫∑t tour t·∫°i Khu Du L·ªãch C·ªìn Ph·ª•ng. Ch√∫ng t√¥i ƒë√£ nh·∫≠n ƒë∆∞·ª£c y√™u c·∫ßu ƒë·∫∑t tour c·ªßa b·∫°n.</p>\n      \n      <div class=\"booking-details\">\n        <h3>üìã Th√¥ng Tin ƒê·∫∑t Tour</h3>\n        <p><strong>M√£ ƒë·∫∑t tour:</strong> {{ $json.reference }}</p>\n        <p><strong>Tour:</strong> {{ $json.tourTitle }}</p>\n        <p><strong>Ng√†y kh·ªüi h√†nh:</strong> {{ $json.departureDate }}</p>\n        <p><strong>S·ªë ng∆∞·ªùi l·ªõn:</strong> {{ $json.adults }}</p>\n        <p><strong>S·ªë tr·∫ª em:</strong> {{ $json.children }}</p>\n        <p><strong>T·ªïng ti·ªÅn:</strong> {{ $json.totalAmount }} VND</p>\n      </div>\n      \n      <p><strong>B∆∞·ªõc ti·∫øp theo:</strong></p>\n      <ol>\n        <li>ƒê·ªôi ng≈© c·ªßa ch√∫ng t√¥i s·∫Ω li√™n h·ªá v·ªõi b·∫°n trong v√≤ng 24h ƒë·ªÉ x√°c nh·∫≠n</li>\n        <li>Vui l√≤ng chu·∫©n b·ªã thanh to√°n theo h∆∞·ªõng d·∫´n</li>\n        <li>Ch√∫ng t√¥i s·∫Ω g·ª≠i th√¥ng tin chi ti·∫øt v·ªÅ tour tr∆∞·ªõc ng√†y kh·ªüi h√†nh</li>\n      </ol>\n      \n      <p>N·∫øu c√≥ b·∫•t k·ª≥ th·∫Øc m·∫Øc n√†o, vui l√≤ng li√™n h·ªá:</p>\n      <p>üìû Hotline: 0xxx-xxx-xxx<br>\n      üìß Email: booking@conphungtourist.com</p>\n    </div>\n    <div class=\"footer\">\n      <p>¬© 2024 Khu Du L·ªãch C·ªìn Ph·ª•ng. All rights reserved.</p>\n      <p>B·∫øn Tre, Vi·ªát Nam</p>\n    </div>\n  </div>\n</body>\n</html>"
      },
      "id": "email-customer",
      "name": "Email - Customer Confirmation",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [450, 200],
      "credentials": {
        "smtp": {
          "id": "1",
          "name": "SMTP account"
        }
      }
    },
    {
      "parameters": {
        "fromEmail": "system@conphungtourist.com",
        "toEmail": "admin@conphungtourist.com",
        "subject": "üéâ Booking m·ªõi #{{ $json.reference }}",
        "emailType": "html",
        "message": "<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n    .header { background: #0ea5e9; color: white; padding: 20px; text-align: center; }\n    .content { padding: 20px; background: #f9f9f9; }\n    .booking-details { background: white; padding: 15px; margin: 15px 0; border-radius: 8px; }\n    .urgent { background: #fef3c7; padding: 10px; border-left: 4px solid #f59e0b; margin: 10px 0; }\n    .button { display: inline-block; padding: 12px 24px; background: #0ea5e9; color: white; text-decoration: none; border-radius: 6px; margin: 10px 0; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>üéâ Booking M·ªõi!</h1>\n    </div>\n    <div class=\"content\">\n      <div class=\"urgent\">\n        <strong>‚ö†Ô∏è C·∫ßn x·ª≠ l√Ω:</strong> Vui l√≤ng li√™n h·ªá kh√°ch h√†ng trong v√≤ng 24h\n      </div>\n      \n      <div class=\"booking-details\">\n        <h3>üìã Chi Ti·∫øt Booking</h3>\n        <p><strong>M√£ booking:</strong> {{ $json.reference }}</p>\n        <p><strong>Tour:</strong> {{ $json.tourTitle }}</p>\n        <p><strong>Ng√†y kh·ªüi h√†nh:</strong> {{ $json.departureDate }}</p>\n        <p><strong>T·ªïng ti·ªÅn:</strong> {{ $json.totalAmount }} VND</p>\n      </div>\n      \n      <div class=\"booking-details\">\n        <h3>üë§ Th√¥ng Tin Kh√°ch H√†ng</h3>\n        <p><strong>T√™n:</strong> {{ $json.customerName }}</p>\n        <p><strong>Email:</strong> {{ $json.customerEmail }}</p>\n        <p><strong>ƒêi·ªán tho·∫°i:</strong> {{ $json.customerPhone }}</p>\n        <p><strong>S·ªë ng∆∞·ªùi l·ªõn:</strong> {{ $json.adults }}</p>\n        <p><strong>S·ªë tr·∫ª em:</strong> {{ $json.children }}</p>\n      </div>\n      \n      <a href=\"{{ $json.bookingUrl }}\" class=\"button\">Xem Chi Ti·∫øt Booking</a>\n    </div>\n  </div>\n</body>\n</html>"
      },
      "id": "email-admin",
      "name": "Email - Admin Notification",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [450, 400],
      "credentials": {
        "smtp": {
          "id": "1",
          "name": "SMTP account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "YOUR_TELEGRAM_CHAT_ID",
        "text": "üéâ *Booking M·ªõi!*\n\nüìã M√£: `{{ $json.reference }}`\nüéØ Tour: {{ $json.tourTitle }}\nüë§ Kh√°ch: {{ $json.customerName }}\nüìû SƒêT: {{ $json.customerPhone }}\nüí∞ T·ªïng: {{ $json.totalAmount }} VND\nüë• Ng∆∞·ªùi l·ªõn: {{ $json.adults }} | Tr·∫ª em: {{ $json.children }}\nüìÖ Kh·ªüi h√†nh: {{ $json.departureDate }}\n\nüîó [Xem chi ti·∫øt]({{ $json.bookingUrl }})",
        "additionalFields": {
          "parseMode": "Markdown"
        }
      },
      "id": "telegram-notification",
      "name": "Telegram - Admin Alert",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [450, 600],
      "credentials": {
        "telegramApi": {
          "id": "2",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { \"success\": true, \"message\": \"Notification sent\" } }}"
      },
      "id": "respond-webhook",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [650, 300]
    }
  ],
  "connections": {
    "Webhook - Tour Booking": {
      "main": [
        [
          {
            "node": "Email - Customer Confirmation",
            "type": "main",
            "index": 0
          },
          {
            "node": "Email - Admin Notification",
            "type": "main",
            "index": 0
          },
          {
            "node": "Telegram - Admin Alert",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email - Customer Confirmation": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email - Admin Notification": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram - Admin Alert": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {},
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2024-01-01T00:00:00.000Z",
  "versionId": "1"
}
